{"branch":"dev","caller":"main.go:156","commit":"dev","goversion":"gc / go1.20.10 / amd64","level":"info","msg":"MetalLB controller starting version 0.13.12 (commit dev, branch dev)","ts":"2023-11-16T06:51:14Z","version":"0.13.12"}
{"action":"setting up cert rotation","caller":"webhook.go:34","level":"info","op":"startup","ts":"2023-11-16T06:51:14Z"}
{"caller":"k8s.go:394","level":"info","msg":"Starting Manager","op":"Run","ts":"2023-11-16T06:51:14Z"}
{"level":"info","ts":"2023-11-16T06:51:14Z","logger":"cert-rotation","msg":"starting cert rotator controller"}
{"level":"info","ts":"2023-11-16T06:51:14Z","msg":"Starting EventSource","controller":"ipaddresspool","controllerGroup":"metallb.io","controllerKind":"IPAddressPool","source":"kind source: *v1beta1.IPAddressPool"}
{"level":"info","ts":"2023-11-16T06:51:14Z","msg":"Starting EventSource","controller":"ipaddresspool","controllerGroup":"metallb.io","controllerKind":"IPAddressPool","source":"kind source: *v1beta1.AddressPool"}
{"level":"info","ts":"2023-11-16T06:51:14Z","msg":"Starting EventSource","controller":"ipaddresspool","controllerGroup":"metallb.io","controllerKind":"IPAddressPool","source":"kind source: *v1beta1.Community"}
{"level":"info","ts":"2023-11-16T06:51:14Z","msg":"Starting EventSource","controller":"ipaddresspool","controllerGroup":"metallb.io","controllerKind":"IPAddressPool","source":"kind source: *v1.Namespace"}
{"level":"info","ts":"2023-11-16T06:51:14Z","msg":"Starting EventSource","controller":"service","controllerGroup":"","controllerKind":"Service","source":"kind source: *v1.Service"}
{"level":"info","ts":"2023-11-16T06:51:14Z","msg":"Starting Controller","controller":"ipaddresspool","controllerGroup":"metallb.io","controllerKind":"IPAddressPool"}
{"level":"info","ts":"2023-11-16T06:51:14Z","msg":"Starting EventSource","controller":"service","controllerGroup":"","controllerKind":"Service","source":"channel source: 0xc000859700"}
{"level":"info","ts":"2023-11-16T06:51:14Z","msg":"Starting EventSource","controller":"cert-rotator","source":"kind source: *v1.Secret"}
{"level":"info","ts":"2023-11-16T06:51:14Z","msg":"Starting Controller","controller":"service","controllerGroup":"","controllerKind":"Service"}
{"level":"info","ts":"2023-11-16T06:51:14Z","msg":"Starting EventSource","controller":"cert-rotator","source":"kind source: *unstructured.Unstructured"}
{"level":"info","ts":"2023-11-16T06:51:14Z","msg":"Starting EventSource","controller":"cert-rotator","source":"kind source: *unstructured.Unstructured"}
{"level":"info","ts":"2023-11-16T06:51:14Z","msg":"Starting EventSource","controller":"cert-rotator","source":"kind source: *unstructured.Unstructured"}
{"level":"info","ts":"2023-11-16T06:51:14Z","msg":"Starting Controller","controller":"cert-rotator"}
W1116 06:51:14.905370       1 warnings.go:70] metallb.io v1beta1 AddressPool is deprecated, consider using IPAddressPool
W1116 06:51:14.907189       1 warnings.go:70] metallb.io v1beta1 AddressPool is deprecated, consider using IPAddressPool
{"level":"info","ts":"2023-11-16T06:51:15Z","msg":"Starting workers","controller":"service","controllerGroup":"","controllerKind":"Service","worker count":1}
{"level":"info","ts":"2023-11-16T06:51:15Z","msg":"Starting workers","controller":"ipaddresspool","controllerGroup":"metallb.io","controllerKind":"IPAddressPool","worker count":1}
{"caller":"service_controller.go:60","controller":"ServiceReconciler","level":"info","start reconcile":"default/reviews","ts":"2023-11-16T06:51:15Z"}
{"caller":"pool_controller.go:48","controller":"PoolReconciler","level":"info","start reconcile":"/kube-flannel","ts":"2023-11-16T06:51:15Z"}
{"caller":"service_controller.go:103","controller":"ServiceReconciler","end reconcile":"default/reviews","level":"info","ts":"2023-11-16T06:51:15Z"}
{"caller":"service_controller.go:60","controller":"ServiceReconciler","level":"info","start reconcile":"istio-system/istiod","ts":"2023-11-16T06:51:15Z"}
{"caller":"service_controller.go:103","controller":"ServiceReconciler","end reconcile":"istio-system/istiod","level":"info","ts":"2023-11-16T06:51:15Z"}
{"caller":"service_controller.go:60","controller":"ServiceReconciler","level":"info","start reconcile":"kube-system/kube-dns","ts":"2023-11-16T06:51:15Z"}
{"caller":"service_controller.go:103","controller":"ServiceReconciler","end reconcile":"kube-system/kube-dns","level":"info","ts":"2023-11-16T06:51:15Z"}
{"caller":"service_controller.go:60","controller":"ServiceReconciler","level":"info","start reconcile":"metallb-system/webhook-service","ts":"2023-11-16T06:51:15Z"}
{"caller":"service_controller.go:103","controller":"ServiceReconciler","end reconcile":"metallb-system/webhook-service","level":"info","ts":"2023-11-16T06:51:15Z"}
{"level":"info","ts":"2023-11-16T06:51:15Z","logger":"cert-rotation","msg":"no cert refresh needed"}
{"caller":"service_controller.go:60","controller":"ServiceReconciler","level":"info","start reconcile":"default/kubernetes","ts":"2023-11-16T06:51:15Z"}
{"level":"info","ts":"2023-11-16T06:51:15Z","logger":"cert-rotation","msg":"certs are ready in /tmp/k8s-webhook-server/serving-certs"}
{"caller":"service_controller.go:103","controller":"ServiceReconciler","end reconcile":"default/kubernetes","level":"info","ts":"2023-11-16T06:51:15Z"}
{"caller":"service_controller.go:60","controller":"ServiceReconciler","level":"info","start reconcile":"default/productpage","ts":"2023-11-16T06:51:15Z"}
{"caller":"pool_controller.go:106","controller":"PoolReconciler","event":"force service reload","level":"info","ts":"2023-11-16T06:51:15Z"}
{"caller":"pool_controller.go:119","controller":"PoolReconciler","event":"config reloaded","level":"info","ts":"2023-11-16T06:51:15Z"}
{"caller":"pool_controller.go:120","controller":"PoolReconciler","end reconcile":"/kube-flannel","level":"info","ts":"2023-11-16T06:51:15Z"}
{"caller":"service_controller.go:103","controller":"ServiceReconciler","end reconcile":"default/productpage","level":"info","ts":"2023-11-16T06:51:15Z"}
{"caller":"pool_controller.go:48","controller":"PoolReconciler","level":"info","start reconcile":"/kube-node-lease","ts":"2023-11-16T06:51:15Z"}
{"caller":"pool_controller.go:95","controller":"PoolReconciler","end reconcile":"/kube-node-lease","level":"info","ts":"2023-11-16T06:51:15Z"}
{"caller":"service_controller.go:60","controller":"ServiceReconciler","level":"info","start reconcile":"default/ratings","ts":"2023-11-16T06:51:15Z"}
{"caller":"pool_controller.go:48","controller":"PoolReconciler","level":"info","start reconcile":"/kube-public","ts":"2023-11-16T06:51:15Z"}
{"caller":"pool_controller.go:95","controller":"PoolReconciler","end reconcile":"/kube-public","level":"info","ts":"2023-11-16T06:51:15Z"}
{"caller":"pool_controller.go:48","controller":"PoolReconciler","level":"info","start reconcile":"/kube-system","ts":"2023-11-16T06:51:15Z"}
{"caller":"service_controller.go:103","controller":"ServiceReconciler","end reconcile":"default/ratings","level":"info","ts":"2023-11-16T06:51:15Z"}
{"caller":"service_controller.go:60","controller":"ServiceReconciler","level":"info","start reconcile":"istio-system/istio-ingressgateway","ts":"2023-11-16T06:51:15Z"}
{"caller":"pool_controller.go:95","controller":"PoolReconciler","end reconcile":"/kube-system","level":"info","ts":"2023-11-16T06:51:15Z"}
{"caller":"pool_controller.go:48","controller":"PoolReconciler","level":"info","start reconcile":"/metallb-system","ts":"2023-11-16T06:51:15Z"}
{"caller":"service.go:135","error":"no available IPs","level":"error","msg":"IP allocation failed","op":"allocateIPs","ts":"2023-11-16T06:51:15Z"}
{"caller":"pool_controller.go:95","controller":"PoolReconciler","end reconcile":"/metallb-system","level":"info","ts":"2023-11-16T06:51:15Z"}
{"caller":"pool_controller.go:48","controller":"PoolReconciler","level":"info","start reconcile":"/default","ts":"2023-11-16T06:51:15Z"}
{"caller":"pool_controller.go:95","controller":"PoolReconciler","end reconcile":"/default","level":"info","ts":"2023-11-16T06:51:15Z"}
{"caller":"pool_controller.go:48","controller":"PoolReconciler","level":"info","start reconcile":"/istio-system","ts":"2023-11-16T06:51:15Z"}
{"caller":"pool_controller.go:95","controller":"PoolReconciler","end reconcile":"/istio-system","level":"info","ts":"2023-11-16T06:51:15Z"}
{"caller":"service_controller.go:100","controller":"ServiceReconciler","endpoints":"{\"Type\":0,\"EpVal\":null,\"SlicesVal\":null}","event":"failed to handle service","level":"error","name":"istio-system/istio-ingressgateway","service":"{\"kind\":\"Service\",\"apiVersion\":\"v1\",\"metadata\":{\"name\":\"istio-ingressgateway\",\"namespace\":\"istio-system\",\"uid\":\"b01122c6-8fc8-448f-be28-c09456e874ca\",\"resourceVersion\":\"255182\",\"creationTimestamp\":\"2023-11-15T05:48:06Z\",\"labels\":{\"app\":\"istio-ingressgateway\",\"install.operator.istio.io/owning-resource\":\"installed-state\",\"install.operator.istio.io/owning-resource-namespace\":\"istio-system\",\"istio\":\"ingressgateway\",\"istio.io/rev\":\"default\",\"operator.istio.io/component\":\"IngressGateways\",\"operator.istio.io/managed\":\"Reconcile\",\"operator.istio.io/version\":\"1.20.0\",\"release\":\"istio\"},\"managedFields\":[{\"manager\":\"istio-operator\",\"operation\":\"Apply\",\"apiVersion\":\"v1\",\"time\":\"2023-11-15T05:48:06Z\",\"fieldsType\":\"FieldsV1\",\"fieldsV1\":{\"f:metadata\":{\"f:annotations\":{},\"f:labels\":{\"f:app\":{},\"f:install.operator.istio.io/owning-resource\":{},\"f:install.operator.istio.io/owning-resource-namespace\":{},\"f:istio\":{},\"f:istio.io/rev\":{},\"f:operator.istio.io/component\":{},\"f:operator.istio.io/managed\":{},\"f:operator.istio.io/version\":{},\"f:release\":{}}},\"f:spec\":{\"f:ports\":{\"k:{\\\"port\\\":80,\\\"protocol\\\":\\\"TCP\\\"}\":{\".\":{},\"f:name\":{},\"f:port\":{},\"f:protocol\":{},\"f:targetPort\":{}},\"k:{\\\"port\\\":443,\\\"protocol\\\":\\\"TCP\\\"}\":{\".\":{},\"f:name\":{},\"f:port\":{},\"f:protocol\":{},\"f:targetPort\":{}},\"k:{\\\"port\\\":15021,\\\"protocol\\\":\\\"TCP\\\"}\":{\".\":{},\"f:name\":{},\"f:port\":{},\"f:protocol\":{},\"f:targetPort\":{}}},\"f:selector\":{},\"f:type\":{}}}}]},\"spec\":{\"ports\":[{\"name\":\"status-port\",\"protocol\":\"TCP\",\"port\":15021,\"targetPort\":15021,\"nodePort\":31750},{\"name\":\"http2\",\"protocol\":\"TCP\",\"port\":80,\"targetPort\":8080,\"nodePort\":30494},{\"name\":\"https\",\"protocol\":\"TCP\",\"port\":443,\"targetPort\":8443,\"nodePort\":30676}],\"selector\":{\"app\":\"istio-ingressgateway\",\"istio\":\"ingressgateway\"},\"clusterIP\":\"10.105.119.53\",\"clusterIPs\":[\"10.105.119.53\"],\"type\":\"LoadBalancer\",\"sessionAffinity\":\"None\",\"externalTrafficPolicy\":\"Cluster\",\"ipFamilies\":[\"IPv4\"],\"ipFamilyPolicy\":\"SingleStack\",\"allocateLoadBalancerNodePorts\":true,\"internalTrafficPolicy\":\"Cluster\"},\"status\":{\"loadBalancer\":{}}}","ts":"2023-11-16T06:51:15Z"}
{"caller":"service_controller.go:101","controller":"ServiceReconciler","end reconcile":"istio-system/istio-ingressgateway","level":"info","ts":"2023-11-16T06:51:15Z"}
{"caller":"service_controller.go:60","controller":"ServiceReconciler","level":"info","start reconcile":"default/details","ts":"2023-11-16T06:51:15Z"}
{"caller":"service_controller.go:103","controller":"ServiceReconciler","end reconcile":"default/details","level":"info","ts":"2023-11-16T06:51:15Z"}
{"caller":"service_controller.go:60","controller":"ServiceReconciler","level":"info","start reconcile":"default/load-balancer-service","ts":"2023-11-16T06:51:15Z"}
{"caller":"service.go:135","error":"no available IPs","level":"error","msg":"IP allocation failed","op":"allocateIPs","ts":"2023-11-16T06:51:15Z"}
{"caller":"service_controller.go:100","controller":"ServiceReconciler","endpoints":"{\"Type\":0,\"EpVal\":null,\"SlicesVal\":null}","event":"failed to handle service","level":"error","name":"default/load-balancer-service","service":"{\"kind\":\"Service\",\"apiVersion\":\"v1\",\"metadata\":{\"name\":\"load-balancer-service\",\"namespace\":\"default\",\"uid\":\"6167fc5e-d5e7-45ce-b93f-a11f82df00ca\",\"resourceVersion\":\"255176\",\"creationTimestamp\":\"2023-11-16T04:45:33Z\",\"labels\":{\"app\":\"guestbook\",\"tier\":\"frontend\"},\"annotations\":{\"kubectl.kubernetes.io/last-applied-configuration\":\"{\\\"apiVersion\\\":\\\"v1\\\",\\\"kind\\\":\\\"Service\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"labels\\\":{\\\"app\\\":\\\"guestbook\\\",\\\"tier\\\":\\\"frontend\\\"},\\\"name\\\":\\\"load-balancer-service\\\",\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"ports\\\":[{\\\"name\\\":\\\"http\\\",\\\"port\\\":80,\\\"protocol\\\":\\\"TCP\\\",\\\"targetPort\\\":80}],\\\"selector\\\":{\\\"app\\\":\\\"guestbook\\\",\\\"tier\\\":\\\"frontend\\\"},\\\"type\\\":\\\"LoadBalancer\\\"}}\\n\"},\"managedFields\":[{\"manager\":\"kubectl-client-side-apply\",\"operation\":\"Update\",\"apiVersion\":\"v1\",\"time\":\"2023-11-16T04:45:33Z\",\"fieldsType\":\"FieldsV1\",\"fieldsV1\":{\"f:metadata\":{\"f:annotations\":{\".\":{},\"f:kubectl.kubernetes.io/last-applied-configuration\":{}},\"f:labels\":{\".\":{},\"f:app\":{},\"f:tier\":{}}},\"f:spec\":{\"f:allocateLoadBalancerNodePorts\":{},\"f:externalTrafficPolicy\":{},\"f:internalTrafficPolicy\":{},\"f:ports\":{\".\":{},\"k:{\\\"port\\\":80,\\\"protocol\\\":\\\"TCP\\\"}\":{\".\":{},\"f:name\":{},\"f:port\":{},\"f:protocol\":{},\"f:targetPort\":{}}},\"f:selector\":{},\"f:sessionAffinity\":{},\"f:type\":{}}}}]},\"spec\":{\"ports\":[{\"name\":\"http\",\"protocol\":\"TCP\",\"port\":80,\"targetPort\":80,\"nodePort\":30414}],\"selector\":{\"app\":\"guestbook\",\"tier\":\"frontend\"},\"clusterIP\":\"10.96.231.89\",\"clusterIPs\":[\"10.96.231.89\"],\"type\":\"LoadBalancer\",\"sessionAffinity\":\"None\",\"externalTrafficPolicy\":\"Cluster\",\"ipFamilies\":[\"IPv4\"],\"ipFamilyPolicy\":\"SingleStack\",\"allocateLoadBalancerNodePorts\":true,\"internalTrafficPolicy\":\"Cluster\"},\"status\":{\"loadBalancer\":{}}}","ts":"2023-11-16T06:51:15Z"}
{"caller":"service_controller.go:101","controller":"ServiceReconciler","end reconcile":"default/load-balancer-service","level":"info","ts":"2023-11-16T06:51:15Z"}
{"caller":"service_controller.go:60","controller":"ServiceReconciler","level":"info","start reconcile":"istio-system/istio-eastwestgateway","ts":"2023-11-16T06:51:15Z"}
{"caller":"service.go:135","error":"no available IPs","level":"error","msg":"IP allocation failed","op":"allocateIPs","ts":"2023-11-16T06:51:15Z"}
{"caller":"service_controller.go:100","controller":"ServiceReconciler","endpoints":"{\"Type\":0,\"EpVal\":null,\"SlicesVal\":null}","event":"failed to handle service","level":"error","name":"istio-system/istio-eastwestgateway","service":"{\"kind\":\"Service\",\"apiVersion\":\"v1\",\"metadata\":{\"name\":\"istio-eastwestgateway\",\"namespace\":\"istio-system\",\"uid\":\"a704bbf0-ee20-4178-8464-4d066de4a3d0\",\"resourceVersion\":\"255179\",\"creationTimestamp\":\"2023-11-15T17:45:14Z\",\"labels\":{\"app\":\"istio-eastwestgateway\",\"install.operator.istio.io/owning-resource\":\"installed-state-eastwest\",\"install.operator.istio.io/owning-resource-namespace\":\"istio-system\",\"istio\":\"eastwestgateway\",\"istio.io/rev\":\"default\",\"operator.istio.io/component\":\"IngressGateways\",\"operator.istio.io/managed\":\"Reconcile\",\"operator.istio.io/version\":\"1.20.0\",\"release\":\"istio\",\"topology.istio.io/network\":\"network1\"},\"managedFields\":[{\"manager\":\"istio-operator\",\"operation\":\"Apply\",\"apiVersion\":\"v1\",\"time\":\"2023-11-15T17:45:14Z\",\"fieldsType\":\"FieldsV1\",\"fieldsV1\":{\"f:metadata\":{\"f:annotations\":{},\"f:labels\":{\"f:app\":{},\"f:install.operator.istio.io/owning-resource\":{},\"f:install.operator.istio.io/owning-resource-namespace\":{},\"f:istio\":{},\"f:istio.io/rev\":{},\"f:operator.istio.io/component\":{},\"f:operator.istio.io/managed\":{},\"f:operator.istio.io/version\":{},\"f:release\":{},\"f:topology.istio.io/network\":{}}},\"f:spec\":{\"f:ports\":{\"k:{\\\"port\\\":15012,\\\"protocol\\\":\\\"TCP\\\"}\":{\".\":{},\"f:name\":{},\"f:port\":{},\"f:protocol\":{},\"f:targetPort\":{}},\"k:{\\\"port\\\":15017,\\\"protocol\\\":\\\"TCP\\\"}\":{\".\":{},\"f:name\":{},\"f:port\":{},\"f:protocol\":{},\"f:targetPort\":{}},\"k:{\\\"port\\\":15021,\\\"protocol\\\":\\\"TCP\\\"}\":{\".\":{},\"f:name\":{},\"f:port\":{},\"f:protocol\":{},\"f:targetPort\":{}},\"k:{\\\"port\\\":15443,\\\"protocol\\\":\\\"TCP\\\"}\":{\".\":{},\"f:name\":{},\"f:port\":{},\"f:protocol\":{},\"f:targetPort\":{}}},\"f:selector\":{},\"f:type\":{}}}}]},\"spec\":{\"ports\":[{\"name\":\"status-port\",\"protocol\":\"TCP\",\"port\":15021,\"targetPort\":15021,\"nodePort\":31298},{\"name\":\"tls\",\"protocol\":\"TCP\",\"port\":15443,\"targetPort\":15443,\"nodePort\":30266},{\"name\":\"tls-istiod\",\"protocol\":\"TCP\",\"port\":15012,\"targetPort\":15012,\"nodePort\":30483},{\"name\":\"tls-webhook\",\"protocol\":\"TCP\",\"port\":15017,\"targetPort\":15017,\"nodePort\":31611}],\"selector\":{\"app\":\"istio-eastwestgateway\",\"istio\":\"eastwestgateway\",\"topology.istio.io/network\":\"network1\"},\"clusterIP\":\"10.109.30.85\",\"clusterIPs\":[\"10.109.30.85\"],\"type\":\"LoadBalancer\",\"sessionAffinity\":\"None\",\"externalTrafficPolicy\":\"Cluster\",\"ipFamilies\":[\"IPv4\"],\"ipFamilyPolicy\":\"SingleStack\",\"allocateLoadBalancerNodePorts\":true,\"internalTrafficPolicy\":\"Cluster\"},\"status\":{\"loadBalancer\":{}}}","ts":"2023-11-16T06:51:15Z"}
{"caller":"service_controller.go:101","controller":"ServiceReconciler","end reconcile":"istio-system/istio-eastwestgateway","level":"info","ts":"2023-11-16T06:51:15Z"}
{"caller":"service_controller_reload.go:61","controller":"ServiceReconciler - reprocessAll","level":"info","start reconcile":"metallbreload/reload","ts":"2023-11-16T06:51:15Z"}
{"caller":"service.go:135","error":"no available IPs","level":"error","msg":"IP allocation failed","op":"allocateIPs","ts":"2023-11-16T06:51:15Z"}
{"caller":"service_controller_reload.go:95","controller":"ServiceReconciler - reprocessAll","endpoints":"{\"Type\":0,\"EpVal\":null,\"SlicesVal\":null}","event":"failed to handle service, no retry","level":"error","name":"default/load-balancer-service","service":"{\"kind\":\"Service\",\"apiVersion\":\"v1\",\"metadata\":{\"name\":\"load-balancer-service\",\"namespace\":\"default\",\"uid\":\"6167fc5e-d5e7-45ce-b93f-a11f82df00ca\",\"resourceVersion\":\"255176\",\"creationTimestamp\":\"2023-11-16T04:45:33Z\",\"labels\":{\"app\":\"guestbook\",\"tier\":\"frontend\"},\"annotations\":{\"kubectl.kubernetes.io/last-applied-configuration\":\"{\\\"apiVersion\\\":\\\"v1\\\",\\\"kind\\\":\\\"Service\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"labels\\\":{\\\"app\\\":\\\"guestbook\\\",\\\"tier\\\":\\\"frontend\\\"},\\\"name\\\":\\\"load-balancer-service\\\",\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"ports\\\":[{\\\"name\\\":\\\"http\\\",\\\"port\\\":80,\\\"protocol\\\":\\\"TCP\\\",\\\"targetPort\\\":80}],\\\"selector\\\":{\\\"app\\\":\\\"guestbook\\\",\\\"tier\\\":\\\"frontend\\\"},\\\"type\\\":\\\"LoadBalancer\\\"}}\\n\"},\"managedFields\":[{\"manager\":\"kubectl-client-side-apply\",\"operation\":\"Update\",\"apiVersion\":\"v1\",\"time\":\"2023-11-16T04:45:33Z\",\"fieldsType\":\"FieldsV1\",\"fieldsV1\":{\"f:metadata\":{\"f:annotations\":{\".\":{},\"f:kubectl.kubernetes.io/last-applied-configuration\":{}},\"f:labels\":{\".\":{},\"f:app\":{},\"f:tier\":{}}},\"f:spec\":{\"f:allocateLoadBalancerNodePorts\":{},\"f:externalTrafficPolicy\":{},\"f:internalTrafficPolicy\":{},\"f:ports\":{\".\":{},\"k:{\\\"port\\\":80,\\\"protocol\\\":\\\"TCP\\\"}\":{\".\":{},\"f:name\":{},\"f:port\":{},\"f:protocol\":{},\"f:targetPort\":{}}},\"f:selector\":{},\"f:sessionAffinity\":{},\"f:type\":{}}}}]},\"spec\":{\"ports\":[{\"name\":\"http\",\"protocol\":\"TCP\",\"port\":80,\"targetPort\":80,\"nodePort\":30414}],\"selector\":{\"app\":\"guestbook\",\"tier\":\"frontend\"},\"clusterIP\":\"10.96.231.89\",\"clusterIPs\":[\"10.96.231.89\"],\"type\":\"LoadBalancer\",\"sessionAffinity\":\"None\",\"externalTrafficPolicy\":\"Cluster\",\"ipFamilies\":[\"IPv4\"],\"ipFamilyPolicy\":\"SingleStack\",\"allocateLoadBalancerNodePorts\":true,\"internalTrafficPolicy\":\"Cluster\"},\"status\":{\"loadBalancer\":{}}}","ts":"2023-11-16T06:51:15Z"}
{"caller":"service.go:135","error":"no available IPs","level":"error","msg":"IP allocation failed","op":"allocateIPs","ts":"2023-11-16T06:51:15Z"}
{"caller":"service_controller_reload.go:95","controller":"ServiceReconciler - reprocessAll","endpoints":"{\"Type\":0,\"EpVal\":null,\"SlicesVal\":null}","event":"failed to handle service, no retry","level":"error","name":"istio-system/istio-eastwestgateway","service":"{\"kind\":\"Service\",\"apiVersion\":\"v1\",\"metadata\":{\"name\":\"istio-eastwestgateway\",\"namespace\":\"istio-system\",\"uid\":\"a704bbf0-ee20-4178-8464-4d066de4a3d0\",\"resourceVersion\":\"255179\",\"creationTimestamp\":\"2023-11-15T17:45:14Z\",\"labels\":{\"app\":\"istio-eastwestgateway\",\"install.operator.istio.io/owning-resource\":\"installed-state-eastwest\",\"install.operator.istio.io/owning-resource-namespace\":\"istio-system\",\"istio\":\"eastwestgateway\",\"istio.io/rev\":\"default\",\"operator.istio.io/component\":\"IngressGateways\",\"operator.istio.io/managed\":\"Reconcile\",\"operator.istio.io/version\":\"1.20.0\",\"release\":\"istio\",\"topology.istio.io/network\":\"network1\"},\"managedFields\":[{\"manager\":\"istio-operator\",\"operation\":\"Apply\",\"apiVersion\":\"v1\",\"time\":\"2023-11-15T17:45:14Z\",\"fieldsType\":\"FieldsV1\",\"fieldsV1\":{\"f:metadata\":{\"f:annotations\":{},\"f:labels\":{\"f:app\":{},\"f:install.operator.istio.io/owning-resource\":{},\"f:install.operator.istio.io/owning-resource-namespace\":{},\"f:istio\":{},\"f:istio.io/rev\":{},\"f:operator.istio.io/component\":{},\"f:operator.istio.io/managed\":{},\"f:operator.istio.io/version\":{},\"f:release\":{},\"f:topology.istio.io/network\":{}}},\"f:spec\":{\"f:ports\":{\"k:{\\\"port\\\":15012,\\\"protocol\\\":\\\"TCP\\\"}\":{\".\":{},\"f:name\":{},\"f:port\":{},\"f:protocol\":{},\"f:targetPort\":{}},\"k:{\\\"port\\\":15017,\\\"protocol\\\":\\\"TCP\\\"}\":{\".\":{},\"f:name\":{},\"f:port\":{},\"f:protocol\":{},\"f:targetPort\":{}},\"k:{\\\"port\\\":15021,\\\"protocol\\\":\\\"TCP\\\"}\":{\".\":{},\"f:name\":{},\"f:port\":{},\"f:protocol\":{},\"f:targetPort\":{}},\"k:{\\\"port\\\":15443,\\\"protocol\\\":\\\"TCP\\\"}\":{\".\":{},\"f:name\":{},\"f:port\":{},\"f:protocol\":{},\"f:targetPort\":{}}},\"f:selector\":{},\"f:type\":{}}}}]},\"spec\":{\"ports\":[{\"name\":\"status-port\",\"protocol\":\"TCP\",\"port\":15021,\"targetPort\":15021,\"nodePort\":31298},{\"name\":\"tls\",\"protocol\":\"TCP\",\"port\":15443,\"targetPort\":15443,\"nodePort\":30266},{\"name\":\"tls-istiod\",\"protocol\":\"TCP\",\"port\":15012,\"targetPort\":15012,\"nodePort\":30483},{\"name\":\"tls-webhook\",\"protocol\":\"TCP\",\"port\":15017,\"targetPort\":15017,\"nodePort\":31611}],\"selector\":{\"app\":\"istio-eastwestgateway\",\"istio\":\"eastwestgateway\",\"topology.istio.io/network\":\"network1\"},\"clusterIP\":\"10.109.30.85\",\"clusterIPs\":[\"10.109.30.85\"],\"type\":\"LoadBalancer\",\"sessionAffinity\":\"None\",\"externalTrafficPolicy\":\"Cluster\",\"ipFamilies\":[\"IPv4\"],\"ipFamilyPolicy\":\"SingleStack\",\"allocateLoadBalancerNodePorts\":true,\"internalTrafficPolicy\":\"Cluster\"},\"status\":{\"loadBalancer\":{}}}","ts":"2023-11-16T06:51:15Z"}
{"caller":"service.go:135","error":"no available IPs","level":"error","msg":"IP allocation failed","op":"allocateIPs","ts":"2023-11-16T06:51:15Z"}
{"caller":"service_controller_reload.go:95","controller":"ServiceReconciler - reprocessAll","endpoints":"{\"Type\":0,\"EpVal\":null,\"SlicesVal\":null}","event":"failed to handle service, no retry","level":"error","name":"istio-system/istio-ingressgateway","service":"{\"kind\":\"Service\",\"apiVersion\":\"v1\",\"metadata\":{\"name\":\"istio-ingressgateway\",\"namespace\":\"istio-system\",\"uid\":\"b01122c6-8fc8-448f-be28-c09456e874ca\",\"resourceVersion\":\"255182\",\"creationTimestamp\":\"2023-11-15T05:48:06Z\",\"labels\":{\"app\":\"istio-ingressgateway\",\"install.operator.istio.io/owning-resource\":\"installed-state\",\"install.operator.istio.io/owning-resource-namespace\":\"istio-system\",\"istio\":\"ingressgateway\",\"istio.io/rev\":\"default\",\"operator.istio.io/component\":\"IngressGateways\",\"operator.istio.io/managed\":\"Reconcile\",\"operator.istio.io/version\":\"1.20.0\",\"release\":\"istio\"},\"managedFields\":[{\"manager\":\"istio-operator\",\"operation\":\"Apply\",\"apiVersion\":\"v1\",\"time\":\"2023-11-15T05:48:06Z\",\"fieldsType\":\"FieldsV1\",\"fieldsV1\":{\"f:metadata\":{\"f:annotations\":{},\"f:labels\":{\"f:app\":{},\"f:install.operator.istio.io/owning-resource\":{},\"f:install.operator.istio.io/owning-resource-namespace\":{},\"f:istio\":{},\"f:istio.io/rev\":{},\"f:operator.istio.io/component\":{},\"f:operator.istio.io/managed\":{},\"f:operator.istio.io/version\":{},\"f:release\":{}}},\"f:spec\":{\"f:ports\":{\"k:{\\\"port\\\":80,\\\"protocol\\\":\\\"TCP\\\"}\":{\".\":{},\"f:name\":{},\"f:port\":{},\"f:protocol\":{},\"f:targetPort\":{}},\"k:{\\\"port\\\":443,\\\"protocol\\\":\\\"TCP\\\"}\":{\".\":{},\"f:name\":{},\"f:port\":{},\"f:protocol\":{},\"f:targetPort\":{}},\"k:{\\\"port\\\":15021,\\\"protocol\\\":\\\"TCP\\\"}\":{\".\":{},\"f:name\":{},\"f:port\":{},\"f:protocol\":{},\"f:targetPort\":{}}},\"f:selector\":{},\"f:type\":{}}}}]},\"spec\":{\"ports\":[{\"name\":\"status-port\",\"protocol\":\"TCP\",\"port\":15021,\"targetPort\":15021,\"nodePort\":31750},{\"name\":\"http2\",\"protocol\":\"TCP\",\"port\":80,\"targetPort\":8080,\"nodePort\":30494},{\"name\":\"https\",\"protocol\":\"TCP\",\"port\":443,\"targetPort\":8443,\"nodePort\":30676}],\"selector\":{\"app\":\"istio-ingressgateway\",\"istio\":\"ingressgateway\"},\"clusterIP\":\"10.105.119.53\",\"clusterIPs\":[\"10.105.119.53\"],\"type\":\"LoadBalancer\",\"sessionAffinity\":\"None\",\"externalTrafficPolicy\":\"Cluster\",\"ipFamilies\":[\"IPv4\"],\"ipFamilyPolicy\":\"SingleStack\",\"allocateLoadBalancerNodePorts\":true,\"internalTrafficPolicy\":\"Cluster\"},\"status\":{\"loadBalancer\":{}}}","ts":"2023-11-16T06:51:15Z"}
{"caller":"service_controller_reload.go:104","controller":"ServiceReconciler - reprocessAll","end reconcile":"metallbreload/reload","level":"info","ts":"2023-11-16T06:51:15Z"}
{"level":"info","ts":"2023-11-16T06:51:15Z","msg":"Starting workers","controller":"cert-rotator","worker count":1}
{"level":"info","ts":"2023-11-16T06:51:15Z","logger":"cert-rotation","msg":"no cert refresh needed"}
{"level":"info","ts":"2023-11-16T06:51:15Z","logger":"cert-rotation","msg":"Ensuring CA cert","name":"metallb-webhook-configuration","gvk":"admissionregistration.k8s.io/v1, Kind=ValidatingWebhookConfiguration","name":"metallb-webhook-configuration","gvk":"admissionregistration.k8s.io/v1, Kind=ValidatingWebhookConfiguration"}
{"level":"info","ts":"2023-11-16T06:51:15Z","logger":"cert-rotation","msg":"Ensuring CA cert","name":"addresspools.metallb.io","gvk":"apiextensions.k8s.io/v1, Kind=CustomResourceDefinition","name":"addresspools.metallb.io","gvk":"apiextensions.k8s.io/v1, Kind=CustomResourceDefinition"}
{"level":"info","ts":"2023-11-16T06:51:15Z","logger":"cert-rotation","msg":"Ensuring CA cert","name":"bgppeers.metallb.io","gvk":"apiextensions.k8s.io/v1, Kind=CustomResourceDefinition","name":"bgppeers.metallb.io","gvk":"apiextensions.k8s.io/v1, Kind=CustomResourceDefinition"}
{"level":"info","ts":"2023-11-16T06:51:16Z","logger":"cert-rotation","msg":"CA certs are injected to webhooks"}
{"action":"webhooks enabled","caller":"webhook.go:55","level":"info","op":"startup","ts":"2023-11-16T06:51:16Z"}
{"level":"info","ts":"2023-11-16T06:51:16Z","logger":"controller-runtime.builder","msg":"skip registering a mutating webhook, object does not implement admission.Defaulter or WithDefaulter wasn't called","GVK":"metallb.io/v1beta1, Kind=AddressPool"}
{"level":"info","ts":"2023-11-16T06:51:16Z","logger":"controller-runtime.builder","msg":"Registering a validating webhook","GVK":"metallb.io/v1beta1, Kind=AddressPool","path":"/validate-metallb-io-v1beta1-addresspool"}
{"level":"info","ts":"2023-11-16T06:51:16Z","logger":"controller-runtime.webhook","msg":"Registering webhook","path":"/validate-metallb-io-v1beta1-addresspool"}
{"level":"info","ts":"2023-11-16T06:51:16Z","logger":"controller-runtime.webhook","msg":"Starting webhook server"}
{"level":"info","ts":"2023-11-16T06:51:16Z","logger":"controller-runtime.webhook","msg":"Registering webhook","path":"/convert"}
{"level":"info","ts":"2023-11-16T06:51:16Z","logger":"controller-runtime.builder","msg":"Conversion webhook enabled","GVK":"metallb.io/v1beta1, Kind=AddressPool"}
{"level":"info","ts":"2023-11-16T06:51:16Z","logger":"controller-runtime.builder","msg":"skip registering a mutating webhook, object does not implement admission.Defaulter or WithDefaulter wasn't called","GVK":"metallb.io/v1beta1, Kind=IPAddressPool"}
{"level":"info","ts":"2023-11-16T06:51:16Z","logger":"controller-runtime.builder","msg":"Registering a validating webhook","GVK":"metallb.io/v1beta1, Kind=IPAddressPool","path":"/validate-metallb-io-v1beta1-ipaddresspool"}
{"level":"info","ts":"2023-11-16T06:51:16Z","logger":"controller-runtime.webhook","msg":"Registering webhook","path":"/validate-metallb-io-v1beta1-ipaddresspool"}
{"level":"info","ts":"2023-11-16T06:51:16Z","logger":"controller-runtime.builder","msg":"skip registering a mutating webhook, object does not implement admission.Defaulter or WithDefaulter wasn't called","GVK":"metallb.io/v1beta2, Kind=BGPPeer"}
{"level":"info","ts":"2023-11-16T06:51:16Z","logger":"controller-runtime.builder","msg":"Registering a validating webhook","GVK":"metallb.io/v1beta2, Kind=BGPPeer","path":"/validate-metallb-io-v1beta2-bgppeer"}
{"level":"info","ts":"2023-11-16T06:51:16Z","logger":"controller-runtime.webhook","msg":"Registering webhook","path":"/validate-metallb-io-v1beta2-bgppeer"}
{"level":"info","ts":"2023-11-16T06:51:16Z","logger":"controller-runtime.builder","msg":"Conversion webhook enabled","GVK":"metallb.io/v1beta2, Kind=BGPPeer"}
{"level":"info","ts":"2023-11-16T06:51:16Z","logger":"controller-runtime.builder","msg":"skip registering a mutating webhook, object does not implement admission.Defaulter or WithDefaulter wasn't called","GVK":"metallb.io/v1beta1, Kind=BGPAdvertisement"}
{"level":"info","ts":"2023-11-16T06:51:16Z","logger":"controller-runtime.builder","msg":"Registering a validating webhook","GVK":"metallb.io/v1beta1, Kind=BGPAdvertisement","path":"/validate-metallb-io-v1beta1-bgpadvertisement"}
{"level":"info","ts":"2023-11-16T06:51:16Z","logger":"controller-runtime.webhook","msg":"Registering webhook","path":"/validate-metallb-io-v1beta1-bgpadvertisement"}
{"level":"info","ts":"2023-11-16T06:51:16Z","logger":"controller-runtime.builder","msg":"skip registering a mutating webhook, object does not implement admission.Defaulter or WithDefaulter wasn't called","GVK":"metallb.io/v1beta1, Kind=L2Advertisement"}
{"level":"info","ts":"2023-11-16T06:51:16Z","logger":"controller-runtime.certwatcher","msg":"Updated current TLS certificate"}
{"level":"info","ts":"2023-11-16T06:51:16Z","logger":"controller-runtime.builder","msg":"Registering a validating webhook","GVK":"metallb.io/v1beta1, Kind=L2Advertisement","path":"/validate-metallb-io-v1beta1-l2advertisement"}
{"level":"info","ts":"2023-11-16T06:51:16Z","logger":"controller-runtime.webhook","msg":"Registering webhook","path":"/validate-metallb-io-v1beta1-l2advertisement"}
{"level":"info","ts":"2023-11-16T06:51:16Z","logger":"controller-runtime.builder","msg":"skip registering a mutating webhook, object does not implement admission.Defaulter or WithDefaulter wasn't called","GVK":"metallb.io/v1beta1, Kind=Community"}
{"level":"info","ts":"2023-11-16T06:51:16Z","logger":"controller-runtime.builder","msg":"Registering a validating webhook","GVK":"metallb.io/v1beta1, Kind=Community","path":"/validate-metallb-io-v1beta1-community"}
{"level":"info","ts":"2023-11-16T06:51:16Z","logger":"controller-runtime.certwatcher","msg":"Starting certificate watcher"}
{"level":"info","ts":"2023-11-16T06:51:16Z","logger":"controller-runtime.webhook","msg":"Registering webhook","path":"/validate-metallb-io-v1beta1-community"}
{"level":"info","ts":"2023-11-16T06:51:16Z","logger":"controller-runtime.webhook","msg":"Serving webhook server","host":"","port":9443}
{"level":"info","ts":"2023-11-16T06:51:16Z","logger":"controller-runtime.builder","msg":"skip registering a mutating webhook, object does not implement admission.Defaulter or WithDefaulter wasn't called","GVK":"metallb.io/v1beta1, Kind=BFDProfile"}
{"level":"info","ts":"2023-11-16T06:51:16Z","logger":"controller-runtime.builder","msg":"Registering a validating webhook","GVK":"metallb.io/v1beta1, Kind=BFDProfile","path":"/validate-metallb-io-v1beta1-bfdprofile"}
{"level":"info","ts":"2023-11-16T06:51:16Z","logger":"controller-runtime.webhook","msg":"Registering webhook","path":"/validate-metallb-io-v1beta1-bfdprofile"}
{"caller":"pool_controller.go:48","controller":"PoolReconciler","level":"info","start reconcile":"/metallb-system","ts":"2023-11-16T06:51:59Z"}
{"caller":"pool_controller.go:95","controller":"PoolReconciler","end reconcile":"/metallb-system","level":"info","ts":"2023-11-16T06:51:59Z"}
W1116 06:56:58.910363       1 warnings.go:70] metallb.io v1beta1 AddressPool is deprecated, consider using IPAddressPool
